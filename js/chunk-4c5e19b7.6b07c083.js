(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4c5e19b7"],{"03c1":function(t,e,s){"use strict";var a=s("6ba6"),i=s.n(a);i.a},"1a80":function(t,e,s){"use strict";var a=s("5e73"),i=s.n(a);i.a},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"5e73":function(t,e,s){},"6ba6":function(t,e,s){},"8e6e":function(t,e,s){var a=s("5ca1"),i=s("990b"),n=s("6821"),c=s("11e9"),o=s("f1ae");a(a.S,"Object",{getOwnPropertyDescriptors:function(t){var e,s,a=n(t),r=c.f,l=i(a),d={},v=0;while(l.length>v)s=r(a,e=l[v++]),void 0!==s&&o(d,e,s);return d}})},"990b":function(t,e,s){var a=s("9093"),i=s("2621"),n=s("cb7c"),c=s("7726").Reflect;t.exports=c&&c.ownKeys||function(t){var e=a.f(n(t)),s=i.f;return s?e.concat(s(t)):e}},f1ae:function(t,e,s){"use strict";var a=s("86cc"),i=s("4630");t.exports=function(t,e,s){e in t?a.f(t,e,i(0,s)):t[e]=s}},fb09:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"data-list-container",attrs:{id:"data-list-list-view"}},[s("vs-popup",{staticClass:"popup-custom-768",attrs:{title:"Thêm mới hóa đơn",active:t.addBill},on:{"update:active":function(e){t.addBill=e}}},[s("AddInvoice",{attrs:{callback:t.getData,active:t.addBill},on:{"update:active":function(e){t.addBill=e}}})],1),s("vs-table-custom",{ref:"table",attrs:{sst:!0,multiple:"",data:t.invoices,search:"",id:"table",maxItems:"10"},on:{search:t.handleSearch,sort:t.handleSort},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return t._l(a,function(e,a){return s("vs-tr",{key:a,staticClass:"col",attrs:{data:e}},[t.views.id.viewable?s("vs-td",[s("p",{staticClass:"product-category"},[t._v(t._s(e.id))])]):t._e(),t.views.student_id.viewable?s("vs-td",[s("p",{staticClass:"product-category"},[t._v(t._s(e.student_id))])]):t._e(),t.views.student_avatar.viewable?s("vs-td",[s("vs-avatar",{attrs:{size:"55px",src:e.student.avatar,alt:e.student.name}})],1):t._e(),t.views.student_name.viewable?s("vs-td",[s("p",{staticClass:"product-category"},[t._v(t._s(e.student.name))])]):t._e(),t.views.amount.viewable?s("vs-td",[s("p",{staticClass:"product-category"},[t._v(t._s(t.formatPrice(e.amount)))])]):t._e(),t.views.note.viewable?s("vs-td",[s("p",{staticClass:"product-category"},[t._v(t._s(e.note))])]):t._e(),t.views.source.viewable?s("vs-td",[s("p",{staticClass:"product-category"},[t._v(t._s(e.source))])]):t._e(),t.views.updated_at.viewable?s("vs-td",[s("p",{staticClass:"product-category"},[t._v(t._s(e.updated_at))])]):t._e(),t.views.created_at.viewable?s("vs-td",[s("p",{staticClass:"product-category"},[t._v(t._s(e.created_at))])]):t._e(),t.views.action.viewable?s("vs-td",{staticClass:"d-flex-span"},[s("vs-button",{attrs:{color:"danger",size:"small",icon:"delete_forever"},on:{click:function(s){return t.deleteInvoice(e)}}})],1):t._e()],1)})}}]),model:{value:t.selected,callback:function(e){t.selected=e},expression:"selected"}},[s("div",{staticClass:"flex flex-wrap-reverse items-center flex-grow justify-between",attrs:{slot:"header"},slot:"header"},[s("div",{staticClass:"flex flex-wrap-reverse items-center"},[s("vs-dropdown",{staticClass:"cursor-pointer mr-4 mb-4",attrs:{"vs-trigger-click":""}},[s("div",{staticClass:"p-4 shadow-drop rounded-lg d-theme-dark-bg cursor-pointer flex items-center justify-center text-lg font-medium w-32"},[s("span",{staticClass:"mr-2"},[t._v("Actions")]),s("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),s("vs-dropdown-menu",[s("vs-dropdown-item",[s("span",[t._v("Delete")])]),s("vs-dropdown-item",[s("span",[t._v("Archive")])]),s("vs-dropdown-item",[s("span",[t._v("Print")])]),s("vs-dropdown-item",[s("span",[t._v("Another Action")])])],1)],1),s("vs-dropdown",{staticClass:"cursor-pointer mr-4 mb-4"},[s("div",{staticClass:"p-4 shadow-drop rounded-lg d-theme-dark-bg cursor-pointer flex items-center justify-center text-lg font-medium w-32"},[s("span",{staticClass:"mr-2"},[t._v("Views")]),s("feather-icon",{attrs:{icon:"ChevronDownIcon",svgClasses:"h-4 w-4"}})],1),s("vs-dropdown-menu",[s("div",{staticClass:"col p-2"},t._l(t.views,function(e,a){return s("div",{key:a,staticClass:"p-1"},[s("vs-checkbox",{attrs:{value:e.viewable},on:{change:function(e){return t.updateViews(a,e)}}},[t._v(t._s(e.text))])],1)}),0)])],1),s("div",{staticClass:"p-3 mb-4 mr-4 rounded-lg cursor-pointer flex items-center justify-between text-lg font-medium text-base text-primary border border-solid border-primary",on:{click:function(e){t.addBill=!0}}},[s("feather-icon",{attrs:{icon:"PlusIcon",svgClasses:"h-4 w-4"}}),s("span",{staticClass:"ml-2 text-base text-primary"},[t._v("Thêm hóa đơn")])],1)],1)]),s("template",{slot:"thead"},t._l(t.views,function(e,a){return e.viewable?s("vs-th",{key:a,attrs:{"sort-key":e.sortKey}},[t._v(t._s(e.text))]):t._e()}),1)],2),s("div",{staticClass:"con-vs-pagination vs-pagination-primary"},[s("nav",{staticClass:"vs-pagination--nav"},[s("paginate",{ref:"paginate",attrs:{"page-count":t.pagination.totalPages,"page-range":3,"margin-pages":2,"active-class":"is-current","container-class":"vs-pagination--ul","page-class":"item-pagination vs-pagination--li","prev-text":t.prev,"next-text":t.next,"click-handler":t.getData,value:t.pagination.currentPage}})],1)])],1)},i=[],n=(s("8e6e"),s("ac6a"),s("456d"),s("bd86")),c=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("vs-row",{attrs:{"vs-w":"12"}},[s("vs-col",{attrs:{"vs-w":"12"}},[s("div",[s("div",{staticClass:"vs-component vs-con-input-label vs-input mb-5 w-full vs-input-primary"},[s("vue-simple-suggest",{ref:"suggestComponentStudents",attrs:{mode:"select",placeholder:"Tìm học viên...","value-attribute":"id","display-attribute":"name",list:t.getStudents,debounce:200,"filter-by-query":!1},on:{select:t.onSuggestSelectStudent},scopedSlots:t._u([{key:"misc-item-above",fn:function(e){var a=e.suggestions,i=e.query;return[s("div",{staticClass:"misc-item"},[s("span",[t._v("You're searching for '"+t._s(i)+"'.")])]),a.length>0?[s("div",{staticClass:"misc-item"},[s("span",[t._v(t._s(a.length)+" suggestions are shown...")])]),s("hr")]:t.loading?t._e():s("div",{staticClass:"misc-item"},[s("span",[t._v("No results")])])]}},{key:"suggestion-item",fn:function(e){var a=e.suggestion;e.query;return s("div",{},[s("div",{staticClass:"text"},[s("span",[t._v(t._s(t._f("truncate")(a.name,40)))])])])}},{key:"misc-item-below",fn:function(e){e.suggestions;return t.loading?s("div",{staticClass:"misc-item"},[s("span",[t._v("Loading...")])]):t._e()}}],null,!0),model:{value:t.selectedStudent,callback:function(e){t.selectedStudent=e},expression:"selectedStudent"}},[s("div",{staticClass:"g"},[s("input",{attrs:{type:"text",placeholder:"Tìm học viên..."}})])])],1)]),null!=t.selectedStudent&&"object"===typeof t.selectedStudent?s("div",{key:"check-course"},[0!=t.selectedStudent.courses.length?s("vs-select",{staticClass:"mt-5 w-full",attrs:{label:"Chọn chương trình học"},model:{value:t.invoices.courses,callback:function(e){t.$set(t.invoices,"courses",e)},expression:"invoices.courses"}},t._l(t.selectedStudent.courses,function(t){return s("vs-select-item",{key:t.id,attrs:{value:t,text:t.name}})}),1):s("div",{key:"check-course"},[s("p",{staticClass:"text-danger"},[t._v("Học viên chưa đăng ký khóa học nào !")])]),s("h5",{staticClass:"my-5"},[t._v("Thông tin học viên")]),s("vs-row",[s("vs-col",{staticClass:"text-center",attrs:{"vs-w":"3"}},[s("vs-avatar",{attrs:{size:"80px",src:t.selectedStudent.avatar}})],1),s("vs-col",{attrs:{"vs-w":"9"}},[s("div",{staticClass:"vx-row mb-5"},[s("div",{staticClass:"vx-col sm:w-1/4 w-full"},[s("strong",[t._v("Tên học viên:")])]),s("div",{staticClass:"vx-col sm:w-3/4 w-full"},[s("span",[t._v(t._s(t.selectedStudent.name))])])]),s("div",{staticClass:"vx-row mb-5"},[s("div",{staticClass:"vx-col sm:w-1/4 w-full"},[s("strong",[t._v("Mã học viên:")])]),s("div",{staticClass:"vx-col sm:w-3/4 w-full"},[s("span",[t._v(t._s(t.selectedStudent.id))]),s("vs-input",{attrs:{value:"id",type:"hidden"}})],1)]),s("div",{staticClass:"vx-row mb-5"},[s("div",{staticClass:"vx-col sm:w-1/4 w-full"},[s("strong",[t._v("Điện thoại:")])]),s("div",{staticClass:"vx-col sm:w-3/4 w-full"},[s("span",[t._v(t._s(t.selectedStudent.phone))])])]),s("div",{staticClass:"vx-row mb-5"},[s("div",{staticClass:"vx-col sm:w-1/4 w-full"},[s("strong",[t._v("Địa chỉ:")])]),s("div",{staticClass:"vx-col sm:w-3/4 w-full"},[s("span",[t._v(t._s(t.selectedStudent.address))])])])])],1)],1):t._e(),t.invoices.courses.id&&0!=t.selectedStudent.courses.length?s("div",{staticClass:"vx-row mb-5"},[s("div",{staticClass:"vx-col w-full pr-0"},[s("h5",{staticClass:"mt-3 mb-3"},[t._v("Chương trình học")])]),s("div",{staticClass:"vx-col w-full"},[s("vs-table",{staticClass:"table-border",attrs:{data:t.invoices.courses},scopedSlots:t._u([{key:"default",fn:function(e){var a=e.data;return[s("vs-tr",[s("vs-td",{attrs:{data:a.name}},[t._v("\r\n                                    "+t._s(a.name)+"\r\n                                ")]),s("vs-td",{attrs:{data:a.price}},[t._v("\r\n                                    "+t._s(t.formatPrice(a.price))+"\r\n                                ")]),s("vs-td",{attrs:{data:a.debt}}),s("vs-td",{attrs:{data:a.price}},[s("vs-input",{attrs:{value:a.price,type:"number"},model:{value:t.invoices.amount,callback:function(e){t.$set(t.invoices,"amount",e)},expression:"invoices.amount"}})],1)],1)]}}],null,!1,1605712812)},[s("template",{slot:"thead"},[s("vs-th",[t._v("Tên CT")]),s("vs-th",[t._v("Học phí "),s("br"),t._v(" (vnđ)")]),s("vs-th",[t._v("Công nợ "),s("br"),t._v(" (vnđ)")]),s("vs-th",[t._v("Thanh toán (vnđ)")])],1)],2)],1),s("div",{staticClass:"vx-col w-full"},[s("vs-row",{staticClass:"mt-5"},[s("vs-col",{staticClass:"p-0",attrs:{"vs-w":"6"}},[s("p",{staticClass:"pt-2"},[s("strong",{staticClass:"text-primary"},[t._v("Tổng tiền thanh toán:")]),t._v(" "+t._s(t.formatPrice(t.invoices.amount))+" vnđ ")])]),s("vs-col",{staticClass:"p-0",attrs:{"vs-w":"6"}},[s("div",{staticClass:"vx-row d-flex"},[s("div",{staticClass:"vx-col p-0 sm:w-1/4 w-full"},[s("strong",{staticClass:"pt-2 d-block text-primary"},[t._v("Bằng chữ:")])]),s("div",{staticClass:"vx-col pl-0 sm:w-3/4 w-full"},[s("span",{staticClass:"mt-2 d-block"},[t._v(" "+t._s(t.DOCSO(t.invoices.amount))+" ")])])])])],1),s("h5",{staticClass:"mt-3 mb-3"},[t._v("Hình thức thanh toán")]),s("ul",{staticClass:"d-flex"},[s("li",{staticClass:"mr-5"},[s("vs-radio",{attrs:{"vs-value":"1"},model:{value:t.invoices.source,callback:function(e){t.$set(t.invoices,"source",e)},expression:"invoices.source"}},[t._v("momo")])],1),s("li",{staticClass:"mr-5"},[s("vs-radio",{attrs:{"vs-value":"2"},model:{value:t.invoices.source,callback:function(e){t.$set(t.invoices,"source",e)},expression:"invoices.source"}},[t._v("bằng tiền mặt")])],1),s("li",{staticClass:"mr-5"},[s("vs-radio",{attrs:{"vs-value":"3"},model:{value:t.invoices.source,callback:function(e){t.$set(t.invoices,"source",e)},expression:"invoices.source"}},[t._v("bằng chuyển khoản")])],1)])],1)]):t._e(),s("div",[s("div",{staticClass:"mt-5 note"},[s("label",{staticClass:"vs-input--label"},[t._v("Ghi chú")])]),s("vs-textarea",{staticClass:"w-full",staticStyle:{border:"solid 1px #dddddd",background:"#fff"},attrs:{name:"note",type:"text",rows:3},model:{value:t.invoices.note,callback:function(e){t.$set(t.invoices,"note",e)},expression:"invoices.note"}})],1)]),s("vs-col",{staticClass:"mt-5",attrs:{"vs-w":"12","vs-type":"flex","vs-justify":"flex-end"}},[s("vs-button",{ref:"addButton",staticClass:"ml-3 vs-con-loading__container",attrs:{disabled:null==t.selectedStudent||"object"!==typeof t.selectedStudent,type:"filled",color:"primary",id:"btn-loading"},on:{click:t.createInvoice}},[t._v("Tạo hóa đơn")]),s("vs-button",{staticClass:"ml-3",attrs:{disabled:null==t.selectedStudent||"object"!==typeof t.selectedStudent,type:"filled",color:"primary"}},[t._v("Tạo & in hóa đơn")]),s("vs-button",{staticClass:"ml-3",attrs:{type:"filled",color:"danger"},on:{click:function(e){return t.$emit("update:active",!1)}}},[t._v("Hủy")])],1)],1)],1)},o=[],r=s("4a7a"),l=s.n(r),d={props:{callback:{type:Function,required:!1}},data:function(){return{disabled:"disabled",selectedStudent:null,totalPrice:0,loading:!1,invoices:{student_id:null,courses:{course_id:null,price:null},note:"",source:3,amount:0}}},components:{"v-select":l.a},methods:{initValues:function(){this.invoices={student_id:null,courses:{course_id:"",price:""},note:"",source:3,amount:0}},createInvoice:function(){var t=this;this.$vs.loading({background:"primary",color:"#fff",container:"#btn-loading",scale:.45}),this.$http.post("invoices",{student_id:this.selectedStudent.id,course_id:this.invoices.courses.id,note:this.invoices.note,source:this.invoices.source,amount:this.invoices.amount}).then(function(){t.$vs.notify({title:"Đã thêm mới thành công",text:"OK",iconPack:"feather",icon:"fa fa-lg fa-check-circle",color:"success"}),t.callback(),t.initValues()}).catch(function(e){if(500===e.response.status&&e.response.data.error.hasOwnProperty("validation")){var s=e.response.data.error.validation[Object.keys(e.response.data.error.validation)[0]][0];t.$vs.notify({title:"Validation error!",text:s,iconPack:"feather",icon:"fa fa-lg fa-exclamation-triangle",color:"danger"})}else t.$vs.notify({title:"Error!",text:"Thêm mới thất bại",iconPack:"feather",icon:"fa fa-lg fa-exclamation-triangle",color:"danger"})}).finally(function(){t.$vs.loading.close("#btn-loading > .con-vs-loading")})},getStudents:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",s=this;return new Promise(function(a,i){t.$http.get("students",{params:{search:e}}).then(function(t){a(t.data.data)}).catch(function(t){s.loading=!1,i(t)})})},onSuggestSelectStudent:function(t){t&&(this.invoices.student_id=t.id)}}},v=d,u=(s("1a80"),s("2877")),p=Object(u["a"])(v,c,o,!1,null,"3a6d0316",null),f=p.exports,h=s("2f62");function m(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);e&&(a=a.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),s.push.apply(s,a)}return s}function g(t){for(var e=1;e<arguments.length;e++){var s=null!=arguments[e]?arguments[e]:{};e%2?m(s,!0).forEach(function(e){Object(n["a"])(t,e,s[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):m(s).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(s,e))})}return t}var b={components:{AddInvoice:f},data:function(){return{addBill:!1,invoiceGetInfo:{},timer:null,selected:[],isMounted:!1,prev:'<button class="vs-pagination--buttons btn-prev-pagination vs-pagination--button-prev"><i class="vs-icon notranslate icon-scale material-icons null">chevron_left</i></button>',next:'<button class="vs-pagination--buttons btn-prev-pagination vs-pagination--button-next"><i class="vs-icon notranslate icon-scale material-icons null">chevron_right</i></button>'}},computed:g({},Object(h["b"])("invoices",["invoices","pagination","searchTerm","order","views","needReload"])),methods:{deleteInvoice:function(t){this.$vs.dialog({type:"confirm",color:"danger",title:"Xóa hóa đơn",text:"Bạn có chắc muốn xóa hóa đơn này",accept:this.invoiceAlert,parameters:[t.id]})},invoiceAlert:function(t){var e=this;this.$http.delete("invoices/"+t).then(function(){e.$vs.notify({color:"success",title:"Xóa hóa đơn",text:"Bạn đã xóa thành công",icon:"verified_user"}),e.getData()}).catch(function(){e.$vs.notify({title:"Error!",text:"Bạn không xóa thành công",iconPack:"feather",icon:"fa fa-lg fa-exclamation-triangle",color:"danger"})})},updateViews:function(t,e){this.$store.dispatch("invoices/updateViews",{index:t,viewable:e.target.checked})},formatData:function(t){return t},getData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=this;e.$vs.loading({color:"#7367F0",text:"Loading..."}),this.$http.get("invoices",{params:{page:t,search:this.searchTerm,orderBy:this.order.orderBy,sortedBy:this.order.orderType}}).then(function(t){e.$store.dispatch("invoices/updateTable",{invoices:e.formatData(t.data.data),pagination:t.data.pagination})}).catch(function(t){e.$vs.notify({title:"Error",text:t,color:"danger",iconPack:"feather",icon:"icon-alert-circle"})}).finally(function(){e.$vs.loading.close()})},handleSearch:function(t){if(!this.needReload)return this.$store.dispatch("invoices/updateNeedReload",!0),!1;var e=this;this.$store.dispatch("invoices/updateSearch",{searchTerm:t}),clearTimeout(this.timer),this.timer=setTimeout(function(){e.getData()},500)},handleSort:function(t,e){this.$store.dispatch("invoices/updateOrder",{order:{orderBy:t,orderType:e?"desc":"asc"}}),this.getData(this.pagination.currentPage)}},mounted:function(){this.$refs.table.searchx=this.searchTerm,this.isMounted=!0,0===this.invoices.length&&this.getData()},destroyed:function(){this.$store.dispatch("invoices/updateNeedReload",!1)}},_=b,w=(s("03c1"),Object(u["a"])(_,a,i,!1,null,null,null));e["default"]=w.exports}}]);
//# sourceMappingURL=chunk-4c5e19b7.6b07c083.js.map